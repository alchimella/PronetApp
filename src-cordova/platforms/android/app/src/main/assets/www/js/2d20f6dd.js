(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d20f6dd"],{b41f:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"flex justify-center content-center items-center"},[n("div",{staticClass:"justify-center full-width"},[t._v("CURRENT VERSION - "+t._s(t.verCounter))]),t.isDownloadButtonActive?n("q-btn",{staticClass:"bg-next-blue1",attrs:{color:"bg-next-blue1",label:"Скачать",loading:t.submitting,disable:!t.isButtonActive},on:{click:t.getUpdate},scopedSlots:t._u([{key:"loading",fn:function(){return[n("q-spinner")]},proxy:!0}])}):n("q-btn",{staticClass:"bg-next-blue1",attrs:{color:"bg-next-blue1",label:"Проверить обновление",loading:t.submitting,disable:!t.isButtonActive},on:{click:t.checkUpdate},scopedSlots:t._u([{key:"loading",fn:function(){return[n("q-spinner")]},proxy:!0}],null,!1,3173242255)}),n("h3",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage.length>0,expression:"errorMessage.length > 0"}],staticClass:"q-pt-lg full-width"},[t._v(t._s(t.errorMessage))])],1)},i=[],o={name:"Settings",data:function(){return{submitting:!1,isButtonActive:!0,isDownloadButtonActive:!1,errorMessage:"",verCounter:localStorage.appVersion,ver:""}},methods:{checkUpdate:function(){var t=this;this.errorMessage="",this.submitting=!0,this.isButtonActive=!1;var e={method:"post",url:"http://pn.pronet.kg:1072/api/81a05d419edf445b9a1d4964eade2c01?op=8"};this.$axios(e).then((function(e){console.log("Проверка версий приложения на сервере прошла успешно",e);var n=t.$config.userCurrentAppVersion,s=e.data.envelope.body.response.data;s[0]&&s[0]["_ver"]>n?(console.warn(s),t.ver=s[0]["_ver"],t.isDownloadButtonActive=!0,t.errorMessage="Доступна новая версия приложения"):t.errorMessage="Новой версии приложения нет",t.submitting=!1,t.isButtonActive=!0})).catch((function(e){console.error("Произошла ошибка при проверке версии на сервере: ",JSON.stringify(e)),t.errorMessage="Произошла ошибка при соединении с сервером",t.submitting=!1,t.isButtonActive=!0}))},getUpdate:function(){this.submitting=!0,this.isButtonActive=!1;var t=this,e=new FileTransfer,n=cordova.file.dataDirectory,s="http://pn.pronet.kg:1072/update/",i="ver_2.apk";e.download(s,n+i,(function(e){apkInstaller.install(i,(function(e){t.submitting=!1,t.isButtonActive=!0,t.errorMessage="",localStorage.appVersion=t.ver,t.verCounter=t.$config.userCurrentAppVersion}),(function(e){t.submitting=!1,t.isButtonActive=!0,t.errorMessage=e}))}),(function(e){t.submitting=!1,t.isButtonActive=!0,t.errorMessage=e}),!1,{})}}},r=o,a=n("2877"),c=n("eebe"),u=n.n(c),l=n("9989"),g=n("9c40"),p=n("0d59"),d=Object(a["a"])(r,s,i,!1,null,null,null);e["default"]=d.exports;u()(d,"components",{QPage:l["a"],QBtn:g["a"],QSpinner:p["a"]})}}]);