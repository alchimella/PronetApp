(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2deae182"],{"0418":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-header",{staticClass:"bg-primary-dark1 no-shadow",attrs:{reveal:""}},[i("q-toolbar",{staticClass:"q-pt-xl"},[t.routesWithBackButton.includes(t.currentRoute)?i("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",dense:""},on:{click:function(e){return t.$router.replace("first-step")}}},[i("img",{staticClass:"back-button-icon",attrs:{src:s("336c")}})]):t._e(),i("q-toolbar-title",{staticClass:"flex justify-center"},["/signup/third-step"==t.currentRoute?i("h1",[t._v("Авторизация")]):i("h1",[t._v("Регистрация")])]),t.routesWithBackButton.includes(t.currentRoute)?i("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",dense:""}}):t._e()],1)],1)},n=[],o={name:"Header",data:function(){return{currentRoute:this.$router.currentRoute.path,routesWithBackButton:["/signup/second-step"]}}},a=o,r=s("2877"),l=s("eebe"),c=s.n(l),u=s("e359"),d=s("65c6"),p=s("9c40"),h=s("6ac5"),f=Object(r["a"])(a,i,n,!1,null,"45075dcc",null);e["a"]=f.exports;c()(f,"components",{QHeader:u["a"],QToolbar:d["a"],QBtn:p["a"],QToolbarTitle:h["a"]})},"336c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAmCAYAAACRWlj1AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFpSURBVHgB3dnNbcJAEIbhb62IC47kIpJFljjQgktICSkhHZBKQgcpwenAHLhg50AqCGckvNlBAYkf27s2h515T1w4PAL/zA5wh4qiSKrqO1+tyhkCS2FghBuP49x+JNx2tzPZdKqXCKRBwAvcsaCQvYENuGPBICP0qANHJaMRPhBAD/DMAQdjzKau9y8IIK+/qAcuS9N0gwByBnLEUU5ArjiqE8gZR7UCueOoRqAEHHUTKAVHXQEl4agzoDQcdQK64P6/sjBm/wMmHYDuOH4pyTgqiuPHTwjFUZEx9ZtSaguhHa7BsixnSkW5vUMmENbpLuqB/AKjzp6Dbki10PrpFUy6epORhrz5LioJ2ThNSEG2zoMSkJ0TPXek05kMZ6TzqRpXpNe5KEek926CG7LX8oUTstfyRWu9tFNI1jaFWHwQU/+g/WDTL2kM3ieT5zkCaPCG9xIZEu5uEdLu6H/X62oOqdHZDgLsD5tCQjgSgxeTAAAAAElFTkSuQmCC"},"3b63":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"flex q-pa-lg"},[s("Header"),t.isUserExist?s("div",{staticClass:"flex row justify-center content-center full-width"},[s("h2",{staticClass:"flex justify-center full-width"},[t._v("Введите пароль")]),s("q-input",{staticClass:"q-mt-md full-width input",attrs:{dark:"",borderless:"",type:t.isPwd?"password":"text",placeholder:"Введите пароль"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"q-pr-lg",attrs:{name:t.isPwd?"visibility":"visibility_off"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1):s("div",{staticClass:"flex row justify-center content-center full-width"},[s("h2",{staticClass:"flex justify-center full-width"},[t._v("Введите номер")]),s("q-select",{staticClass:"q-mb-md full-width",staticStyle:{"font-size":"18px"},attrs:{filled:"",dark:"",options:t.options,color:"bg-next-blue3","options-selected-class":"text-deep-blue"},scopedSlots:t._u([{key:"option",fn:function(e){return[s("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[s("q-item-section",[s("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}})],1),s("q-item-section",[s("q-item-label",{staticStyle:{"text-align":"end"},attrs:{caption:""}},[t._v(t._s(e.opt.code))])],1)],1)]}}],null,!1,4170453646),model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),s("div",{staticClass:"flex row justify-between full-width"},[s("q-input",{staticClass:"col-3 input",attrs:{type:"tel",pattern:"\\d*",dark:"",borderless:"","unmasked-value":""},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),s("q-input",{staticClass:"col-8 input",attrs:{type:"tel",pattern:"\\d*",dark:"",borderless:"","unmasked-value":"",placeholder:"000 000 000 "},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),s("q-input",{staticClass:"q-mt-md full-width input",attrs:{dark:"",borderless:"",type:t.isPwd?"password":"text",placeholder:"Введите пароль"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"q-pr-lg",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!1,542848442),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("div",{staticClass:"flex row justify-center content-end items-end full-width"},[s("h3",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage.length>0,expression:"errorMessage.length > 0"}],staticClass:"q-pl-lg q-pr-lg q-pb-lg full-width"},[t._v(t._s(t.errorMessage))]),t.isUserExist?s("q-btn",{staticClass:"full-width submit-button",attrs:{label:"Далее",loading:t.submitting,disable:!t.isButtonActive,"no-caps":""},on:{click:t.reRegistration},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-spinner")]},proxy:!0}])}):s("q-btn",{staticClass:"full-width submit-button",attrs:{label:"Далее",loading:t.submitting,disable:!t.isButtonActive,"no-caps":""},on:{click:t.registerTerminal},scopedSlots:t._u([{key:"loading",fn:function(){return[s("q-spinner")]},proxy:!0}],null,!1,3173242255)})],1)],1)},n=[],o=(s("a481"),s("0418")),a={name:"SignUpFirstStep",components:{Header:o["a"]},data:function(){return{phone:"",password:"",errorMessage:"",submitting:!1,isButtonActive:!0,deviceId:device.uuid,signature:"a80ef6f574652d870113226ba0cbe72c",isPwd:!0,isUserExist:!1,model:"Кыргызстан",code:"+996",options:[{label:"Кыргызстан",value:"Кыргызстан",code:"+996"}]}},watch:{model:function(t){t&&(this.code=this.model.code)}},methods:{registerTerminal:function(){var t=this;if(console.log("Запушен первый регистрации"),this.code+this.phone.length==0||0==this.password.length)return console.warn("Не заполены поля"),void(this.errorMessage="Заполните поля");this.errorMessage="",this.submitting=!0,this.isButtonActive=!1;var e={method:"post",url:"http://pn.pronet.kg:1072/api/81a05d419edf445b9a1d4964eade2c01?op=1&phone=".concat(this.code+this.phone,"&passwd=").concat(this.password,"&signature=").concat(this.signature)};this.$axios(e).then((function(e){console.log("Первый шаг регистрацию терминала прошел успешно. Ожидается подтверждение!",e);var s=e.data.envelope.body.response.data,i=e.data.envelope.body.response.data._idrref;0!=s.length?(t.$config.userIdrref=i,t.submitting=!1,t.isButtonActive=!0,t.$router.replace("second-step")):(t.submitting=!1,t.isButtonActive=!0,t.errorMessage="Данный номер телефона уже зарегистрирован",t.isUserExist=!0,t.password="")})).catch((function(e){console.error("Произошла ошибка при первом регистрации терминала: ",JSON.stringify(e)),t.errorMessage="Произошла ошибка при соединении с сервером",t.submitting=!1,t.isButtonActive=!0}))},reRegistration:function(){var t=this;this.submitting=!0,this.isButtonActive=!1;var e={method:"post",url:"http://pn.pronet.kg:1072/api/81a05d419edf445b9a1d4964eade2c01?op=9&passwd=".concat(this.code+this.password,"&phone=").concat(this.phone)};this.$axios(e).then((function(e){console.log("Первый шаг перерегистрации пользователя прошел успешно. Ожидается подтверждение!",e);var s=e.data.envelope.body.response.data._idrref,i=e.data.envelope.body.response.message;if(!s)return t.submitting=!1,t.isButtonActive=!0,void(t.errorMessage=i);t.$config.userIdrref=s,t.submitting=!1,t.isButtonActive=!0,t.isUserExist=!1,t.$router.replace("second-step")})).catch((function(e){console.error("Произошла ошибка при первом регистрации терминала: ",JSON.stringify(e)),t.errorMessage="Произошла ошибка при соединении с сервером",t.submitting=!1,t.isButtonActive=!0}))}}},r=a,l=s("2877"),c=s("eebe"),u=s.n(c),d=s("9989"),p=s("ddd8"),h=s("66e5"),f=s("4074"),g=s("0170"),b=s("27f9"),m=s("0016"),A=s("9c40"),w=s("0d59"),v=Object(l["a"])(r,i,n,!1,null,"52e3a2ea",null);e["default"]=v.exports;u()(v,"components",{QPage:d["a"],QSelect:p["a"],QItem:h["a"],QItemSection:f["a"],QItemLabel:g["a"],QInput:b["a"],QIcon:m["a"],QBtn:A["a"],QSpinner:w["a"]})}}]);